<div class="default-form">
  <h2 class="default-form-title">
    <%= experience.new_record? ? "Cr√©er une exp√©rience" : "Modifier l'exp√©rience" %>
  </h2>

  <%= form_with(model: experience, class: "space-y-6") do |f| %>

    <div class="default-form-grid">
      <div>
        <%= f.label :company, "Soci√©t√©", class: "default-form-label" %>
        <%= f.text_field :company, class: "default-form-input" %>
      </div>

      <div>
        <%= f.label :location, "Ville", class: "default-form-label" %>
        <%= f.text_field :location, class: "default-form-input" %>
      </div>

      <div>
        <%= f.label :start_date, "Date de d√©but", class: "default-form-label" %>
        <%= f.date_field :start_date, class: "default-form-input" %>
      </div>

      <div>
        <%= f.label :end_date, "Date de fin", class: "default-form-label" %>
        <%= f.date_field :end_date, class: "default-form-input" %>
      </div>
    </div>

    <% [[:fr, "üá´üá∑ Fran√ßais"], [:en, "üá¨üáß English"], [:nl, "üá≥üá± Nederlands"]].each do |locale, label| %>
      <div class="border border-cyan-900 rounded-lg p-4 space-y-4">
        <p class="text-xs font-bold uppercase tracking-widest text-cyan-400"><%= label %></p>

        <div>
          <%= label_tag "experience_job_title_#{locale}", "Intitul√© du poste", class: "default-form-label" %>
          <%= text_field_tag "experience[job_title_#{locale}]",
                             experience.send("job_title_#{locale}"),
                             id: "experience_job_title_#{locale}",
                             class: "default-form-input" %>
        </div>

        <div data-controller="tinymce">
          <%= label_tag "experience_missions_#{locale}", "Missions", class: "default-form-label" %>
          <%= text_area_tag "experience[missions_#{locale}]",
                            experience.send("missions_#{locale}"),
                            id: "experience_missions_#{locale}",
                            class: "default-form-input editor" %>
        </div>

        <div data-controller="tinymce">
          <%= label_tag "experience_tools_#{locale}", "Outils / technologies", class: "default-form-label" %>
          <%= text_area_tag "experience[tools_#{locale}]",
                            experience.send("tools_#{locale}"),
                            id: "experience_tools_#{locale}",
                            class: "default-form-input editor" %>
        </div>
      </div>
    <% end %>

    <h3 class="default-form-section-title">Projets li√©s</h3>
    <div data-controller="projects">
      <div data-projects-target="projects" class="space-y-4">
        <%= f.fields_for :projects do |project_form| %>
          <div class="default-form-project">
            <%= render "project_fields", f: project_form %>
          </div>
        <% end %>
      </div>

      <button data-action="projects#add" type="button" class="default-form-add-project text-blue-500">
        Ajouter un projet
      </button>

      <template data-projects-target="template">
        <div class="default-form-project">
          <%= f.fields_for :projects, Project.new, child_index: "NEW_RECORD" do |project_form| %>
            <%= render "project_fields", f: project_form %>
          <% end %>
        </div>
      </template>
    </div>

    <%= f.submit "Enregistrer", class: "default-form-submit" %>
  <% end %>
</div>
